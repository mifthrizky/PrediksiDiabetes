services:
  # Service untuk Backend
  backend:
    build:
      context: ./backend # Path ke folder backend
      dockerfile: Dockerfile
    ports:
      - "8000:8000" # Mapping port: [Port di komputermu]:[Port di container]
    volumes:
      - ./backend:/app # Sinkronisasi kode untuk development (opsional)

  # Service untuk Frontend
  frontend:
    build:
      context: ./frontend # Path ke folder frontend
      dockerfile: Dockerfile
    ports:
      - "8080:5173" # Mapping port: [Port di komputermu]:[Port di container]
    volumes:
      # Ini WAJIB untuk hot-reloading (sinkronisasi kode)
      - ./frontend:/app
      # 'Trik' agar node_modules di container tidak tertimpa
      - /app/node_modules
    command: npm run dev -- --host --port 5173
    depends_on:
      - backend # Menunggu backend jalan dulu (opsional)
